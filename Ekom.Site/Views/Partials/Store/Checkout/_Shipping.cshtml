@inherits Umbraco.Web.Mvc.UmbracoTemplatePage

@{
    var order = (Ekom.Models.OrderInfo)ViewData["order"];

    if (order != null)
    {
        var shippingProviders = Ekom.API.Providers.Current.GetShippingProviders();
        var currentShippingProviderKey = order.ShippingProvider != null ? order.ShippingProvider.Key : Guid.Empty; 

        using (Html.BeginUmbracoForm("UpdateShippingProvider", "EkomOrder", null, new { @Class = "cart__shipping-form" }))
        {
            <h1 class="checkout__caption">Choose Shipping</h1>

            <input type="hidden" name="storeAlias" value="@order.StoreInfo.Alias" />

            foreach (var shippingProvider in shippingProviders)
            {
                <div>
                    <label for="@shippingProvider.Key">
                        @shippingProvider.Title - @shippingProvider.Price.Value
                        <input id="@shippingProvider.Key" type="radio" name="shippingProvider" value="@shippingProvider.Key" @(currentShippingProviderKey == shippingProvider.Key ? "checked=checked" : "") />
                    </label>
                </div>
            }

            <div>
                <button type="submit" class="button">Update</button>
            </div>
        }

    }
}
